<div id="loader" ng-if="timeout"></div>
<!-- User -->
<div ng-if="loaded && user.role === 'USER'" class="profile-page">
    <section class="user-profile">
        <div class="user-info">
            <!-- Picture -->
            <div ng-if="!user.img" class="no-profile-picture">
                <img src="../images/member-default.jpg" alt="">
            </div>
            <div ng-if="user.img" class="profile-picture">
                <img ng-src="{{user.img}}">
            </div>

            <!-- Upload picture -->
            <label for="select">Прикачване на снимка</label>
            <input type=button ng-click="getFile.simulate()" id="select" class="btn btn-primary" value="Избери файл" /><p></p>
            <input id="choose" hidden onchange="angular.element(this).scope().isChosen()" type="file" class="upload" name="file"/>
            <label ng-show="chosen" id="selected"></label>
            <button ng-if="chosen" class="btn btn-success" ng-click="uploadPicture()">Прикачи</button>

            <!-- Info panel -->
            <div class="info-panel">
                <p><strong>Име:</strong> {{ user.firstName + ' ' + user.lastName }}</p>
                <p><strong>E-mail:</strong> {{ user.email }}</p>
                <p><strong>Регистриран на:</strong> {{ user.registeredDate | date }}</p>
            </div>
        </div>

        <div class="profil-controll">
            <div class="page-options">
                <strong>Настройки на профила</strong>
            </div>
            <div class="options">
                <span><a href="/myCV">Моето CV</a></span>
            </div>
            <div class="options">
                <span><a href="/favourites/1">Наблюдавани обяви</a> [{{ user.favourites.length }}]</span>
            </div>
            <div class="options">
                <span><a href="/applied/1">Къде сте кандидатствали</a> [{{ user.applied.length }}]</span>
            </div>
            <div class="options">
                <span><a href="/update-profile">Промяна на лични данни</a></span>
            </div>
        </div>
    </section>
</div>

<!-- Company -->
<div ng-if="loaded && user.role === 'COMPANY'" class="profile-page">
    <section class="company-profile">
        <div class="company-info">
            <!-- Picture -->
            <div ng-if="!user.img" class="no-company-picture">
                <img src="../images/member-default.jpg" alt="">
            </div>
            <div ng-if="user.img" class="company-picture">
                <a href="/company/{{user.id}}"><img ng-src="{{user.img}}"></a>                
            </div>

            <!-- Upload picture -->
            <label for="select">Прикачване на снимка</label>
            <input type=button ng-click="getFile.simulate()" id="select" class="btn btn-primary" value="Избери файл" /><p></p>
            <input id="choose" hidden onchange="angular.element(this).scope().isChosen()" type="file" class="upload" name="file"/>
            <label ng-show="chosen" id="selected"></label>
            <button ng-if="chosen" class="btn btn-success" ng-click="uploadPicture()">Прикачи</button>

            <!-- Info panel -->
            <div class="info-panel">
                <p><strong>Име:</strong> {{ user.title }}</p>
                <p><strong>E-mail:</strong> {{ user.email }}</p>
                <p><strong>Регистриран на:</strong> {{ user.registeredDate | date }}</p>
            </div>
        </div>

        <div class="profil-controll">
            <div class="page-options">
                <strong>Настройки на профила</strong>
            </div>
            <div class="options">
                <span><a href="/add-advert">Добави обява</a></span>
            </div>
            <div class="options">
                <span><a href="/my-adverts/1">Публикувани обяви</a> [{{ user.adverts.length }}]</span>
            </div>
            <div class="options">
                <span><a href="/messages">Съобщения</a> [{{ user.messages.length }}]</span>
            </div>
            <div class="options">
                <span><a href="/update-profile">Промяна на лични данни</a></span>
            </div>
        </div>
    </section>

    <!-- Radios for upload -->
    <div class="radios">
        <div class="custom-control custom-radio custom-control-inline">
            <input type="radio" id="picture" ng-checked="isVideo" ng-value="false" ng-model="isVideo"
                class="custom-control-input" />
            <label class="custom-control-label" for="picture">Снимки</label>
        </div>
        <div class="custom-control custom-radio custom-control-inline">
            <input type="radio" id="video" ng-checked="isVideo" ng-value="true"
                ng-model="isVideo" class="custom-control-input" />
            <label class="custom-control-label" for="video">Видео</label>
        </div>
    </div>

    <!-- Upload picture -->
    <div class="upload-file" ng-if="!isVideo">
        <div nv-file-drop="" nv-file-over="" uploader="uploadPictures" over-class="other-over-zone" class="other-drop-zone zone">
            Плъзнете снимки, за да ги качите
        </div>
        <div>
            <div>
                Total progress: {{ uploadPictures.progress }}
                <div class="total-progress-box">
                    <div class="total-progress" ng-style="{ 'width': uploadPictures.progress + '%' }"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Upload video -->
    <div class="upload-file" ng-if="isVideo">
        <div nv-file-drop="" nv-file-over="" uploader="uploadVideo" over-class="other-over-zone" class="other-drop-zone zone">
            Плъзнете видео, за да го качите
        </div>
        <div>
            <div>
                Total progress: {{ uploadVideo.progress }}
                <div class="total-progress-box">
                    <div class="total-progress" ng-style="{ 'width': uploadVideo.progress + '%' }"></div>
                </div>
            </div>
        </div>
    </div>
</div>
